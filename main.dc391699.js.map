{"version":3,"sources":["scripts/main.js"],"names":["document","body","insertAdjacentHTML","thead","querySelector","tbody","form","rows","pushNotification","message","type","errorTitle","notifyErrors","name","position","office","age","salary","title","div","length","numberOfParagraph","error","p","createElement","innerText","append","classList","add","style","top","setTimeout","querySelectorAll","forEach","x","remove","sortElemInTwoWays","element","start","end","parceSalary","parseFloat","slice","replace","localeCompare","addEventListener","e","preventDefault","data","FormData","formData","Object","fromEntries","entries","formBoolean","check","push","reset","toLocaleString","addClass","target","toggleAttribute","index","firstElementChild","children","findIndex","elem","sort","a","b","contains","parentElement","toggle","initialText","input","select","theadTitle","styleTD","getComputedStyle","inputOrSelect","width","innerHTML","focus","text","value","trim","Number","toLowerCase","textContent","evnt","code","blur"],"mappings":"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","file":"main.dc391699.js","sourceRoot":"../src","sourcesContent":["'use strict';\n\n// FORM html code\ndocument.body.insertAdjacentHTML('beforeend', `\n  <form method=\"/\" action=\"GET\" class=\"new-employee-form\">\n  <label>Name:\n    <input name=\"name\" type=\"text\" data-qa=\"name\">\n  </label>\n  <label>Position:\n    <input name=\"position\" type=\"text\" data-qa=\"position\">\n  </label>\n  <label>Office:\n    <select name=\"office\" data-qa=\"office\">\n      <option hidden></option>\n      <option value=\"Tokyo\">Tokyo</option>\n      <option value=\"Singapore\">Singapore</option>\n      <option value=\"London\">London</option>\n      <option value=\"New York\">New York</option>\n      <option value=\"Edinburgh\">Edinburgh</option>\n      <option value=\"San Francisco\">San Francisco</option>\n    </select>\n  </label>\n  <label>Age:\n    <input name=\"age\" type=\"number\" data-qa=\"age\">\n  </label>\n  <label>Salary:\n    <input name=\"salary\" type=\"number\" data-qa=\"salary\">\n  </label>\n  <button type=\"submit\">Save to table</button>\n  </form>\n`);\n\nconst thead = document.querySelector('thead');\nconst tbody = document.querySelector('tbody');\nconst form = document.querySelector('form');\nconst rows = tbody.rows;\n\n// Push notification FUNCTION;\nfunction pushNotification(message, type) {\n  const errorTitle = `Form was't added !!!`;\n  const successTitle = `Form was added`;\n  const notifyErrors = {\n    name: 'Name field should have not less then 4 character',\n    position: 'Position field should have not less then 4 character',\n    office: 'Office field should be selected',\n    age: 'Age field should be from 18 to 90',\n    salary: 'Salary field should be from 90$',\n  };\n  const successDescription = `Employee was added in the end of the table!\\n `\n    + `To edit the data double click on a cell!`;\n\n  const title = type === 'success' ? successTitle : errorTitle;\n  const body = document.querySelector('body');\n\n  body.insertAdjacentHTML('beforeend', `\n    <div class=\"notification\" class=${type} data-qa=\"notification\">\n      <h2 class=\"title\">${title}</h2>\n    </div>\n  `);\n\n  const div = document.querySelector('.notification');\n\n  if (message.length > 0) {\n    let numberOfParagraph = 1;\n\n    for (const error of message) {\n      const p = document.createElement('p');\n\n      p.innerText = `${numberOfParagraph}. ${notifyErrors[error]}`;\n      div.append(p);\n      numberOfParagraph++;\n    }\n  } else {\n    const p = document.createElement('p');\n\n    p.innerText = successDescription;\n    div.append(p);\n  }\n\n  div.classList.add(type);\n  div.style.top = '450px';\n\n  setTimeout(() => {\n    document.querySelectorAll('.notification').forEach(x => x.remove());\n  }, 6000);\n};\n\n// Sorting tables FUCTION\nfunction sortElemInTwoWays(element, start, end) {\n  if (element === 'Salary') {\n    const parceSalary = (salary) => {\n      return parseFloat(salary.slice(1).replace(',', '.'));\n    };\n\n    return parceSalary(start) - parceSalary(end);\n  } else {\n    return start.localeCompare(end);\n  }\n};\n\n// Submit form EVENT\nform.addEventListener('submit', e => {\n  e.preventDefault();\n\n  const data = new FormData(form);\n  const formData = Object.fromEntries(data.entries());\n  const salary = +formData.salary;\n  const message = [];\n  let type = 'success';\n\n  const formBoolean = {\n    name: formData.name.length >= 4,\n    position: formData.position.length >= 4,\n    office: formData.office !== '',\n    age: +formData.age >= 18 && +formData.age <= 90,\n    salary: +formData.salary > 90,\n  };\n\n  for (const check in formBoolean) {\n    if (!formBoolean[check]) {\n      type = 'error';\n      message.push(check);\n    }\n  }\n\n  pushNotification(message, type);\n\n  if (type === 'success') {\n    form.reset();\n\n    tbody.insertAdjacentHTML('beforeend', `\n    <tr>\n      <td>${formData.name}</td>\n      <td>${formData.position}</td>\n      <td>${formData.office}</td>\n      <td>${formData.age}</td>\n      <td>$${salary.toLocaleString('en-US')}</td>\n    </tr>\n  `);\n  }\n});\n\n// Sorting table EVENT\nthead.addEventListener('click', e => {\n  const addClass = e.target.toggleAttribute('sorted');\n  const headerRow = thead.firstElementChild.children;\n  const index = [...headerRow].findIndex(elem => elem === e.target);\n\n  const sortedList = [...rows].sort((a, b) => {\n    const start = a.children[index].innerText;\n    const end = b.children[index].innerText;\n\n    if (addClass) {\n      return sortElemInTwoWays(e.target.innerText, start, end);\n    } else {\n      return sortElemInTwoWays(e.target.innerText, end, start);\n    }\n  });\n\n  sortedList.forEach(elem => tbody.append(elem));\n});\n\n// Selecting row EVENT\ntbody.addEventListener('click', e => {\n  for (const x of rows) {\n    if (x.classList.contains('active') && x !== e.target.parentElement) {\n      x.classList.remove('active');\n    }\n  }\n\n  e.target.parentElement.classList.toggle('active');\n});\n\n// Eit cell EVENT\ntbody.addEventListener('dblclick', e => {\n  const initialText = e.target.innerText;\n  const target = e.target.parentElement;\n  const input = document.createElement('input');\n  const select = document.createElement('select');\n  const theadTitle = thead.firstElementChild.children;\n  const index = [...target.children].findIndex(x => x === e.target);\n  const styleTD = getComputedStyle(e.target);\n  let inputOrSelect = true;\n\n  target.children[index].innerText = '';\n  input.classList.add('cell-input');\n  select.classList.add('cell-input');\n  input.style.width = styleTD.width;\n  select.style.width = styleTD.width;\n\n  if (index < 2) {\n    input.type = 'text';\n  }\n\n  if (index > 2) {\n    input.type = 'number';\n  }\n\n  if (index === 2) {\n    select.innerHTML = `\n        <option value=\"Tokyo\">Tokyo</option>\n        <option value=\"Singapore\">Singapore</option>\n        <option value=\"London\">London</option>\n        <option value=\"New York\">New York</option>\n        <option value=\"Edinburgh\">Edinburgh</option>\n        <option value=\"San Francisco\">San Francisco</option>`;\n\n    inputOrSelect = false;\n  }\n\n  inputOrSelect\n    ? target.children[index].append(input)\n    : target.children[index].append(select);\n\n  input.focus();\n\n  input.addEventListener('blur', () => {\n    let text = input.value.trim();\n\n    if (!text) {\n      text = initialText;\n    }\n\n    if (index === 4 && input.value) {\n      if (input.value < 1) {\n        text = initialText;\n      } else {\n        text = '$' + Number(text).toLocaleString('en-US');\n      }\n    }\n\n    const inputBoolean = {\n      0: input.value.length >= 4, // column's title Name;\n      1: input.value.length >= 4, // column's title Position;\n      3: +input.value >= 18 && +text <= 90, // column's title Age;\n      4: +input.value >= 90, // column's title Salary;\n    };\n\n    if (!inputBoolean[index]) {\n      text = initialText;\n\n      const errorName = theadTitle[index].innerText.toLowerCase();\n\n      pushNotification([errorName], 'error');\n    }\n\n    input.parentElement.textContent = text;\n  });\n\n  input.addEventListener('keydown', evnt => {\n    if (evnt.code === 'Enter') {\n      input.blur();\n    }\n  });\n});\n"]}